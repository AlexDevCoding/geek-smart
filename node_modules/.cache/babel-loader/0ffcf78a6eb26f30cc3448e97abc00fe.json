{"ast":null,"code":"\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useEvent } from 'rc-util';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport { getMergedStatus } from '../../_util/statusUtils';\nimport { devUseWarning } from '../../_util/warning';\nimport { ConfigContext } from '../../config-provider';\nimport useCSSVarCls from '../../config-provider/hooks/useCSSVarCls';\nimport useSize from '../../config-provider/hooks/useSize';\nimport { FormItemInputContext } from '../../form/context';\nimport useStyle from '../style/otp';\nimport OTPInput from './OTPInput';\n\nfunction strToArr(str) {\n  return (str || '').split('');\n}\n\nconst OTP = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    prefixCls: customizePrefixCls,\n    length = 6,\n    size: customSize,\n    defaultValue,\n    value,\n    onChange,\n    formatter,\n    variant,\n    disabled,\n    status: customStatus,\n    autoFocus,\n    mask\n  } = props,\n        restProps = __rest(props, [\"prefixCls\", \"length\", \"size\", \"defaultValue\", \"value\", \"onChange\", \"formatter\", \"variant\", \"disabled\", \"status\", \"autoFocus\", \"mask\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Input.OTP');\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof mask === 'string' && mask.length > 1), 'usage', '`mask` prop should be a single character.') : void 0;\n  }\n\n  const {\n    getPrefixCls,\n    direction\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('otp', customizePrefixCls);\n  const domAttrs = pickAttrs(restProps, {\n    aria: true,\n    data: true,\n    attr: true\n  }); // ========================= Root =========================\n  // Style\n\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls); // ========================= Size =========================\n\n  const mergedSize = useSize(ctx => customSize !== null && customSize !== void 0 ? customSize : ctx); // ======================== Status ========================\n\n  const formContext = React.useContext(FormItemInputContext);\n  const mergedStatus = getMergedStatus(formContext.status, customStatus);\n  const proxyFormContext = React.useMemo(() => Object.assign(Object.assign({}, formContext), {\n    status: mergedStatus,\n    hasFeedback: false,\n    feedbackIcon: null\n  }), [formContext, mergedStatus]); // ========================= Refs =========================\n\n  const containerRef = React.useRef(null);\n  const refs = React.useRef({});\n  React.useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n\n      (_a = refs.current[0]) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n\n      for (let i = 0; i < length; i += 1) {\n        (_a = refs.current[i]) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    },\n    nativeElement: containerRef.current\n  })); // ======================= Formatter ======================\n\n  const internalFormatter = txt => formatter ? formatter(txt) : txt; // ======================== Values ========================\n\n\n  const [valueCells, setValueCells] = React.useState(strToArr(internalFormatter(defaultValue || '')));\n  React.useEffect(() => {\n    if (value !== undefined) {\n      setValueCells(strToArr(value));\n    }\n  }, [value]);\n  const triggerValueCellsChange = useEvent(nextValueCells => {\n    setValueCells(nextValueCells); // Trigger if all cells are filled\n\n    if (onChange && nextValueCells.length === length && nextValueCells.every(c => c) && nextValueCells.some((c, index) => valueCells[index] !== c)) {\n      onChange(nextValueCells.join(''));\n    }\n  });\n  const patchValue = useEvent((index, txt) => {\n    let nextCells = _toConsumableArray(valueCells); // Fill cells till index\n\n\n    for (let i = 0; i < index; i += 1) {\n      if (!nextCells[i]) {\n        nextCells[i] = '';\n      }\n    }\n\n    if (txt.length <= 1) {\n      nextCells[index] = txt;\n    } else {\n      nextCells = nextCells.slice(0, index).concat(strToArr(txt));\n    }\n\n    nextCells = nextCells.slice(0, length); // Clean the last empty cell\n\n    for (let i = nextCells.length - 1; i >= 0; i -= 1) {\n      if (nextCells[i]) {\n        break;\n      }\n\n      nextCells.pop();\n    } // Format if needed\n\n\n    const formattedValue = internalFormatter(nextCells.map(c => c || ' ').join(''));\n    nextCells = strToArr(formattedValue).map((c, i) => {\n      if (c === ' ' && !nextCells[i]) {\n        return nextCells[i];\n      }\n\n      return c;\n    });\n    return nextCells;\n  }); // ======================== Change ========================\n\n  const onInputChange = (index, txt) => {\n    var _a;\n\n    const nextCells = patchValue(index, txt);\n    const nextIndex = Math.min(index + txt.length, length - 1);\n\n    if (nextIndex !== index) {\n      (_a = refs.current[nextIndex]) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n\n    triggerValueCellsChange(nextCells);\n  };\n\n  const onInputActiveChange = nextIndex => {\n    var _a;\n\n    (_a = refs.current[nextIndex]) === null || _a === void 0 ? void 0 : _a.focus();\n  }; // ======================== Render ========================\n\n\n  const inputSharedProps = {\n    variant,\n    disabled,\n    status: mergedStatus,\n    mask\n  };\n  return wrapCSSVar( /*#__PURE__*/React.createElement(\"div\", Object.assign({}, domAttrs, {\n    ref: containerRef,\n    className: classNames(prefixCls, {\n      [`${prefixCls}-sm`]: mergedSize === 'small',\n      [`${prefixCls}-lg`]: mergedSize === 'large',\n      [`${prefixCls}-rtl`]: direction === 'rtl'\n    }, cssVarCls, hashId)\n  }), /*#__PURE__*/React.createElement(FormItemInputContext.Provider, {\n    value: proxyFormContext\n  }, Array.from({\n    length\n  }).map((_, index) => {\n    const key = `otp-${index}`;\n    const singleValue = valueCells[index] || '';\n    return /*#__PURE__*/React.createElement(OTPInput, Object.assign({\n      ref: inputEle => {\n        refs.current[index] = inputEle;\n      },\n      key: key,\n      index: index,\n      size: mergedSize,\n      htmlSize: 1,\n      className: `${prefixCls}-input`,\n      onChange: onInputChange,\n      value: singleValue,\n      onActiveChange: onInputActiveChange,\n      autoFocus: index === 0 && autoFocus\n    }, inputSharedProps));\n  }))));\n});\nexport default OTP;","map":{"version":3,"sources":["C:/Users/david/Downloads/Login_React (Desarrollo)/node_modules/antd/es/input/OTP/index.js"],"names":["_toConsumableArray","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","classNames","useEvent","pickAttrs","getMergedStatus","devUseWarning","ConfigContext","useCSSVarCls","useSize","FormItemInputContext","useStyle","OTPInput","strToArr","str","split","OTP","forwardRef","props","ref","prefixCls","customizePrefixCls","size","customSize","defaultValue","value","onChange","formatter","variant","disabled","status","customStatus","autoFocus","mask","restProps","process","env","NODE_ENV","warning","getPrefixCls","direction","useContext","domAttrs","aria","data","attr","rootCls","wrapCSSVar","hashId","cssVarCls","mergedSize","ctx","formContext","mergedStatus","proxyFormContext","useMemo","assign","hasFeedback","feedbackIcon","containerRef","useRef","refs","useImperativeHandle","focus","_a","current","blur","nativeElement","internalFormatter","txt","valueCells","setValueCells","useState","useEffect","undefined","triggerValueCellsChange","nextValueCells","every","c","some","index","join","patchValue","nextCells","slice","concat","pop","formattedValue","map","onInputChange","nextIndex","Math","min","onInputActiveChange","inputSharedProps","createElement","className","Provider","Array","from","_","key","singleValue","inputEle","htmlSize","onActiveChange"],"mappings":"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","sourcesContent":["\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useEvent } from 'rc-util';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport { getMergedStatus } from '../../_util/statusUtils';\nimport { devUseWarning } from '../../_util/warning';\nimport { ConfigContext } from '../../config-provider';\nimport useCSSVarCls from '../../config-provider/hooks/useCSSVarCls';\nimport useSize from '../../config-provider/hooks/useSize';\nimport { FormItemInputContext } from '../../form/context';\nimport useStyle from '../style/otp';\nimport OTPInput from './OTPInput';\nfunction strToArr(str) {\n  return (str || '').split('');\n}\nconst OTP = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls: customizePrefixCls,\n      length = 6,\n      size: customSize,\n      defaultValue,\n      value,\n      onChange,\n      formatter,\n      variant,\n      disabled,\n      status: customStatus,\n      autoFocus,\n      mask\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"length\", \"size\", \"defaultValue\", \"value\", \"onChange\", \"formatter\", \"variant\", \"disabled\", \"status\", \"autoFocus\", \"mask\"]);\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Input.OTP');\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof mask === 'string' && mask.length > 1), 'usage', '`mask` prop should be a single character.') : void 0;\n  }\n  const {\n    getPrefixCls,\n    direction\n  } = React.useContext(ConfigContext);\n  const prefixCls = getPrefixCls('otp', customizePrefixCls);\n  const domAttrs = pickAttrs(restProps, {\n    aria: true,\n    data: true,\n    attr: true\n  });\n  // ========================= Root =========================\n  // Style\n  const rootCls = useCSSVarCls(prefixCls);\n  const [wrapCSSVar, hashId, cssVarCls] = useStyle(prefixCls, rootCls);\n  // ========================= Size =========================\n  const mergedSize = useSize(ctx => customSize !== null && customSize !== void 0 ? customSize : ctx);\n  // ======================== Status ========================\n  const formContext = React.useContext(FormItemInputContext);\n  const mergedStatus = getMergedStatus(formContext.status, customStatus);\n  const proxyFormContext = React.useMemo(() => Object.assign(Object.assign({}, formContext), {\n    status: mergedStatus,\n    hasFeedback: false,\n    feedbackIcon: null\n  }), [formContext, mergedStatus]);\n  // ========================= Refs =========================\n  const containerRef = React.useRef(null);\n  const refs = React.useRef({});\n  React.useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = refs.current[0]) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n      for (let i = 0; i < length; i += 1) {\n        (_a = refs.current[i]) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    },\n    nativeElement: containerRef.current\n  }));\n  // ======================= Formatter ======================\n  const internalFormatter = txt => formatter ? formatter(txt) : txt;\n  // ======================== Values ========================\n  const [valueCells, setValueCells] = React.useState(strToArr(internalFormatter(defaultValue || '')));\n  React.useEffect(() => {\n    if (value !== undefined) {\n      setValueCells(strToArr(value));\n    }\n  }, [value]);\n  const triggerValueCellsChange = useEvent(nextValueCells => {\n    setValueCells(nextValueCells);\n    // Trigger if all cells are filled\n    if (onChange && nextValueCells.length === length && nextValueCells.every(c => c) && nextValueCells.some((c, index) => valueCells[index] !== c)) {\n      onChange(nextValueCells.join(''));\n    }\n  });\n  const patchValue = useEvent((index, txt) => {\n    let nextCells = _toConsumableArray(valueCells);\n    // Fill cells till index\n    for (let i = 0; i < index; i += 1) {\n      if (!nextCells[i]) {\n        nextCells[i] = '';\n      }\n    }\n    if (txt.length <= 1) {\n      nextCells[index] = txt;\n    } else {\n      nextCells = nextCells.slice(0, index).concat(strToArr(txt));\n    }\n    nextCells = nextCells.slice(0, length);\n    // Clean the last empty cell\n    for (let i = nextCells.length - 1; i >= 0; i -= 1) {\n      if (nextCells[i]) {\n        break;\n      }\n      nextCells.pop();\n    }\n    // Format if needed\n    const formattedValue = internalFormatter(nextCells.map(c => c || ' ').join(''));\n    nextCells = strToArr(formattedValue).map((c, i) => {\n      if (c === ' ' && !nextCells[i]) {\n        return nextCells[i];\n      }\n      return c;\n    });\n    return nextCells;\n  });\n  // ======================== Change ========================\n  const onInputChange = (index, txt) => {\n    var _a;\n    const nextCells = patchValue(index, txt);\n    const nextIndex = Math.min(index + txt.length, length - 1);\n    if (nextIndex !== index) {\n      (_a = refs.current[nextIndex]) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    triggerValueCellsChange(nextCells);\n  };\n  const onInputActiveChange = nextIndex => {\n    var _a;\n    (_a = refs.current[nextIndex]) === null || _a === void 0 ? void 0 : _a.focus();\n  };\n  // ======================== Render ========================\n  const inputSharedProps = {\n    variant,\n    disabled,\n    status: mergedStatus,\n    mask\n  };\n  return wrapCSSVar( /*#__PURE__*/React.createElement(\"div\", Object.assign({}, domAttrs, {\n    ref: containerRef,\n    className: classNames(prefixCls, {\n      [`${prefixCls}-sm`]: mergedSize === 'small',\n      [`${prefixCls}-lg`]: mergedSize === 'large',\n      [`${prefixCls}-rtl`]: direction === 'rtl'\n    }, cssVarCls, hashId)\n  }), /*#__PURE__*/React.createElement(FormItemInputContext.Provider, {\n    value: proxyFormContext\n  }, Array.from({\n    length\n  }).map((_, index) => {\n    const key = `otp-${index}`;\n    const singleValue = valueCells[index] || '';\n    return /*#__PURE__*/React.createElement(OTPInput, Object.assign({\n      ref: inputEle => {\n        refs.current[index] = inputEle;\n      },\n      key: key,\n      index: index,\n      size: mergedSize,\n      htmlSize: 1,\n      className: `${prefixCls}-input`,\n      onChange: onInputChange,\n      value: singleValue,\n      onActiveChange: onInputActiveChange,\n      autoFocus: index === 0 && autoFocus\n    }, inputSharedProps));\n  }))));\n});\nexport default OTP;"]},"metadata":{},"sourceType":"module"}